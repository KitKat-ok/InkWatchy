name: Build demo

on:
  push:
    branches: [ master ]

jobs:
  demo:
    runs-on: self-hosted
    steps:
      - name: demo build
        run: |
          rm -rf InkWatchy-demo 1>/dev/null 2>/dev/null
          git clone https://github.com/Szybet/InkWatchy.git InkWatchy-demo
          cd InkWatchy-demo
          ./resources/tools/other/demoMaker.sh
          cd ..
      - name: Upload demo program
        uses: actions/upload-artifact@v4
        with:
          name: demo-program
          path: InkWatchy-demo/resources/tools/other/out/demo-program.bin
      - name: Upload demo source
        uses: actions/upload-artifact@v4
        with:
          name: demo-source
          path: InkWatchy-demo/resources/tools/other/out/demo-source.zip
